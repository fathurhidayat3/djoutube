{% load static %}
<!DOCTYPE html>
<html>

<head>
    <title>Djoutube - Youtube Downloader Web App</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.1/css/materialize.min.css">
    <style>
    .row>.page-footer {
        background-color: #34495E;
        margin-bottom: -30px;
        /*height: 200px;*/
    }

    .row.input {
        padding-top: 10px;
    }

    .add-height {
        height: 300px;
        /*background-color: red;*/
    }

    .fcollection {
        max-height: 170px;
        overflow-y: scroll;
    }

    .fmedia {
        height: 250px;
    }

    .fvid {
        height: 100%;
        width: 100%;
    }

    .fwhit {
        background-color: #ECF0F1;
    }

    h5 {
        margin-top: 0px;
        margin-bottom: 0px;
    }

    b {
        color: #34495E;
    }

    .fyell {
        background-color: #E67E22;
    }

    .fblu {
        background-color: #34495E;
    }

    .fgre {
        background-color: #27AE60;
    }

    .nav-content {
        padding-left: 20px;
    }
    </style>
</head>

<body class="fblu">
    {% block content %}
    <div class="fwhit">
        <!-- nav -->
        <nav class="nav-extended">
            <div class="nav-wrapper fblu">
                <b><a href="#!" class="brand-logo center">DJoutube</a></b>
                <!-- <ul class="left hide-on-med-and-down">
                    <li><a href="/search/">Search Video Here</a></li>
                </ul> -->
                <!-- <a class="btn-floating btn-large halfway-fab waves-effect waves-light fgre modal-trigger" href="#modal1">
                <i class="fa fa-info"></i></a> -->
                <div class="nav-content">
                    <ul class="tabs tabs-transparent">
                        <li class="tab"><a class="active" href="#test1">Home</a></li>
                        <li class="tab"><a href="#test2">Search Here</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <div id="test1" class="col s12">Test 1</div>
        <div id="test2" class="col s12">Test 2</div>
        <!-- end nav -->
        <div class="row">
            <div class="col s12 m12">
                <div class="wrapper">
                    <div class="col s0 m2"></div>
                    <div class="col s12 m8">
                        <div class="row input">
                            <div class="input-field">
                                <!-- <i class="fa fa-link prefix"></i> -->
                                <input id="f-url" type="text" class="validate" value="https://www.youtube.com/watch?v=YgtL4S7Hrwo&t=155s">
                                <label for="f-url">Enter Youtube Link here : </label>
                            </div>
                            <div class="center-align">
                                <a class="btn waves-effect waves-light fgre" type="button" name="action" onclick="fsubmit()">
                                    Submit
                                    <i class="material-icons right">send</i>
                                </a>
                            </div>
                        </div>
                        <div class="divider"></div>
                        <br>
                        <div class="fprev row col s12">
                            <h5 id="fvid-title">Video Author : Video Title</h5></div>
                        <div class="row col s12 m6">
                            <div class="fmedia card valign-wrapper" id="fvid-frame">
                                <iframe class="fvid" src="" height="250" frameborder="0" allowfullscreen></iframe>
                            </div>
                        </div>
                        <div class="row col s12 m6">
                            <ul class="collection with-header">
                                <li class="collection-header">
                                    <p>Available Formats : </p>
                                </li>
                                <div class="fcollection" id="fcollection">
                                    <li class="collection-item">
                                        <div>
                                            You will see formats here
                                            <a class="secondary-content" href=""><i class="material-icons">file_download</i></a>
                                        </div>
                                    </li>
                                </div>
                            </ul>
                        </div>
                        <!-- <div class="fixed-action-btn vertical">
                            <a class="btn-floating btn-large fgre"><i class="fa fa-question"></i></a>
                            <ul>
                                <li class="btn-floating btn-small fgre tooltipped modal-trigger" href="#modal1" data-position="left" data-delay="20" data-tooltip="Instruction"><a><i class="fa fa-info"></i></a></li>
                                <li class="btn-floating btn-small fgre tooltipped" data-position="left" data-delay="20" data-tooltip="Share To Other"><a href="#!"><i class="fa fa-share-alt"></i></a></li>
                                <li class="btn-floating btn-small fgre tooltipped" data-position="left" data-delay="20" data-tooltip="Get Source Code"><a href="#test4"><i class="fa fa-github"></i></a></li>
                            </ul>
                        </div> -->
                        <!-- modal -->
                        <div id="modal1" class="modal">
                            <div class="modal-content">
                                <h4>Instruction : </h4>
                                <ul>
                                    <li>1. Get Youtube video link address or id you want to download, for example :
                                        <br>
                                        <p><b class="tooltipped" data-position="top" data-delay="20" data-tooltip="video link">https://www.youtube.com/watch?v=YgtL4S7Hrwo</b> or <b class="tooltipped" data-position="top" data-delay="20" data-tooltip="video id">YgtL4S7Hrwo</b></p>
                                    </li>
                                    <li>2. Paste on the input box then click submit</li>
                                    <li>3. Make sure you download right video by watch preview</li>
                                    <li>4. Choose video format you want</li>
                                    <li>5. Enjoy</li>
                                </ul>
                            </div>
                            <!-- <div class="modal-footer">
                                <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Agree</a>
                            </div> -->
                        </div>
                        <!-- end modal -->
                    </div>
                    <div class="col s0 m2">
                    </div>
                </div>
            </div>
        </div>
        <div class="row col s12 m12">
            <nav class="nav fyell">
                <div class="nav-content">
                    Supported Sites : &emsp;<span>
                    <i class="fa fa-youtube-square fa-2x tooltipped" data-tooltip="Youtube" data-position="top" data-delay="20"></i>
                    </span>
                </div>
            </nav>
            <footer class="page-footer fblu">
                <div class="row">
                    <div class="col l6 offset-l1 s12">
                        <h5 class="white-text">DJoutube</h5>
                        <p class="grey-text text-lighten-4">Is a web app to download youtube video with various formats.
                            <br> This site is open source project built with Python, Django, Jquery and MaterializeCSS.
                            <br> You can grab the source code <a id="grab-me" href="https://github.com/fzrbbx">here</a>.
                            <br> Happy coding :)</p>
                    </div>
                    <div class="col l4 offset-l1 s12">
                        <h5 class="white-text">External Links</h5>
                        <ul>
                            <li><a class="grey-text text-lighten-3" href="#!">My Personal Site</a></li>
                            <li><a class="grey-text text-lighten-3" href="#!">My Github Repository</a></li>
                        </ul>
                    </div>
                </div>
                <!-- <div class="footer-copyright fblu"> -->
                <!-- <div class="container"> -->
                <!-- Â© 2017 by Fathur Hidayat -->
                <!-- <a class="grey-text text-lighten-4 right" href="#!">More Links</a> -->
                <!-- </div> -->
                <!-- </div> -->
            </footer>
        </div>
    </div>
    {% endblock %} {% block script %}
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <!-- <script src="vendor/jquery-validation/dist/jquery.validate.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.1/js/materialize.min.js"></script>
    <script>
    $(document).ready(function(furl) {
        $('.modal').modal();
        $('#f-url').focus();
        // $.ajax({
        //         url: '/' + encodeURIComponent(furl),
        //         type: 'GET',
        //         dataType: 'json',
        //         data: {},
        //     })
        //     .done(function(response) {
        //         $("#fvid-title").html(response.author + " : " + response.title);
        //         $("#fvid-frame").html("<iframe class='fvid' src='https://www.youtube.com/embed/" +
        //             response.videoid + "'height='250' frameborder='0' allowfullscreen></iframe>");
        //         $.each(response.vstreams, function(index, val) {
        //             $("#fcollection").append("<li class='collection-item'><div>" +
        //                 response.fstreams[index] + "&emsp;" + val +
        //                 "<a class='secondary-content' href='" + response.ustreams[index] +
        //                 "' target='_blank'><i class='material-icons'>file_download</i></a></div></li>");
        //         });
        //     })
        //     .fail(function() {
        //         console.log("error");
        //     })
        //     .always(function() {
        //         console.log("complete");
        //     });
    });
    </script>
    <script>
    function fsubmit() {
        var furl = $("#f-url").val();
        $.ajax({
                url: 'ng/home/' + encodeURIComponent(furl),
                type: 'GET',
                dataType: 'json',
                data: {},
            })
            .done(function(response) {
                $("#fvid-title").html(response.author + " : " + response.title);
                $("#fvid-frame").html("<iframe class='fvid' src='https://www.youtube.com/embed/" +
                    response.videoid + "'height='250' frameborder='0' allowfullscreen></iframe>");
                $.each(response.vstreams, function(index, val) {
                    $("#fcollection").append("<li class='collection-item'><div>" +
                        response.fstreams[index] + "&emsp;" + val +
                        "<a class='secondary-content' href='" + response.ustreams[index] +
                        "' target='_blank'><i class='material-icons'>file_download</i></a></div></li>");
                });
            })
            .fail(function() {
                console.log("error");
            })
            .always(function() {
                console.log("complete");
            });
        $("#fcollection").html("");
    }
    </script>
    {% endblock %}
</body>

</html>